<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Змейка — до 8 участников</title>
  <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="floating-bg" id="floating-bg"></div>
  <h1>Змейка — до 8 участников</h1>
  <div class="mode-indicator" id="mode-indicator"></div>
  <div id="setup-screen">
    <h2>Настройте игру</h2>
    <div class="selection-row">
      <label for="human-players">Игроков (1–4):</label>
      <div class="custom-select-container" id="human-players-container">
        <button class="custom-select-button" data-value="1">1</button>
        <div class="custom-select-options">
          <div class="custom-select-option" data-value="1">1</div>
          <div class="custom-select-option" data-value="2">2</div>
          <div class="custom-select-option" data-value="3">3</div>
          <div class="custom-select-option" data-value="4">4</div>
        </div>
      </div>
    </div>
    <div class="selection-row">
      <label for="bot-count">Ботов (0–7):</label>
      <div class="custom-select-container" id="bot-count-container">
        <button class="custom-select-button" data-value="0">0</button>
        <div class="custom-select-options">
          <div class="custom-select-option" data-value="0">0</div>
          <div class="custom-select-option" data-value="1">1</div>
          <div class="custom-select-option" data-value="2">2</div>
          <div class="custom-select-option" data-value="3">3</div>
          <div class="custom-select-option" data-value="4">4</div>
          <div class="custom-select-option" data-value="5">5</div>
          <div class="custom-select-option" data-value="6">6</div>
          <div class="custom-select-option" data-value="7">7</div>
        </div>
      </div>
    </div>
    <div class="selection-row game-mode-selection">
      <label>Режим игры:</label>
      <div class="mode-selector">
        <button class="mode-btn active" data-mode="classic">Классика</button>
        <div class="ghost-container">
          <button class="mode-btn" data-mode="ghost-main">Призрак</button>
          <div class="ghost-submodes">
            <button class="submode-btn" data-mode="half-ghost">Полупризрак</button>
            <button class="submode-btn" data-mode="family-ghost">Семейка недопризраков</button>
            <button class="submode-btn" data-mode="full-ghost">Полноценный призрак</button>
            <button class="submode-btn" data-mode="all-ghosts">Компашка призраков</button>
          </div>
        </div>
        <button class="mode-btn" data-mode="magic-shooter">Магический шутер</button>
        <div class="mode-description">
          <div class="description-content active" data-mode="classic">
            <h3>Классический режим</h3>
            <p>Стандартные правила змейки. Столкновение с хвостом или другими змейками приводит к проигрышу. Все участники полностью видны на поле.</p>
          </div>
          <div class="description-content" data-mode="ghost-main">
            <h3>Режим "Призрак"</h3>
            <p>В этом режиме змейки могут становиться невидимыми. Видны только головы с глазами. Наведите курсор на варианты ниже, чтобы выбрать конкретный режим.</p>
          </div>
          <div class="description-content" data-mode="half-ghost">
            <h3>Полупризрак</h3>
            <p>Случайным образом игроки становятся невидимыми на 5 секунд. Хвост призрака полностью невидим и не имеет хитбокса. Интервал между исчезаниями не меньше 5 секунд.</p>
          </div>
          <div class="description-content" data-mode="family-ghost">
            <h3>Семейка недопризраков</h3>
            <p>Все змейки (игроки и боты) могут становиться призраками. Хвост призрака невидим, но сохраняет хитбокс, то есть об него можно умереть.</p>
          </div>
          <div class="description-content" data-mode="full-ghost">
            <h3>Полноценный призрак</h3>
            <p>Игроки-люди являются призраками с начала игры. Хвост призрака невидим. Об хвост призрака может умереть только другой призрак.</p>
          </div>
          <div class="description-content" data-mode="all-ghosts">
            <h3>Компашка призраков</h3>
            <p>Все змейки являются призраками с начала игры. Хвосты невидимы, но сохраняют хитбоксы. Самый сложный режим — нужно запоминать положение невидимых хвостов.</p>
          </div>
          <div class="description-content" data-mode="magic-shooter">
            <h3>Магический шутер</h3>
            <p>С вероятностью 30% вместо обычного яблока появляется зачарованное, которое дает один из эффектов на 10 секунд: "Оружие" (40%) - автоматические выстрелы раз в секунду, "Неуязвимость" (40%) - игрок может проходить через другие змейки, "Диарея" (20%) - каждые 5 секунд игрок теряет по 1 клетке.</p>
          </div>
        </div>
      </div>
    </div>
    <div class="selected-mode-display">
      <span>Выбранный режим:</span>
      <span class="mode-name" id="selected-mode-display">Классика</span>
    </div>
    <div id="error-message"></div>
    <button id="start-controls-btn"><span>Настроить управление</span></button>
    <div class="instructions">
      <p>До 8 змеек могут соревноваться одновременно!</p>
      <p>Управление: клавиатура или свайпы на экране</p>
      <p class="ghost-info" style="margin-top: 10px; font-style: italic; color: #ff9e6d;">
        В режимах "Призрак" и "Магический шутер" могут быть специальные механики
      </p>
    </div>
  </div>
p></p>div>div></div>p></p>h3>  <di
v id="controls-screen">
    <h2>Настройка управления игроками</h2>
    <div id="controls-list" class="control-settings">
      <div class="control-row">
        <label for="control-0">Игрок 1:</label>
        <div class="custom-select-container" id="control-0-container">
          <button class="custom-select-button" data-value="keyboard1">Клавиатура (ЦФЫВ)</button>
          <div class="custom-select-options">
            <div class="custom-select-option" data-value="keyboard1">Клавиатура (ЦФЫВ)</div>
            <div class="custom-select-option" data-value="keyboard2">Клавиатура (НПРО)</div>
            <div class="custom-select-option" data-value="keyboard3">Клавиатура (ЗДЖЭ)</div>
            <div class="custom-select-option" data-value="keyboard4">Клавиатура (Стрелки)</div>
            <div class="custom-select-option" data-value="swipe">Свайпы</div>
          </div>
        </div>
      </div>
      <div class="control-row">
        <label for="control-1">Игрок 2:</label>
        <div class="custom-select-container" id="control-1-container">
          <button class="custom-select-button" data-value="keyboard2">Клавиатура (НПРО)</button>
          <div class="custom-select-options">
            <div class="custom-select-option" data-value="keyboard1">Клавиатура (ЦФЫВ)</div>
            <div class="custom-select-option" data-value="keyboard2">Клавиатура (НПРО)</div>
            <div class="custom-select-option" data-value="keyboard3">Клавиатура (ЗДЖЭ)</div>
            <div class="custom-select-option" data-value="keyboard4">Клавиатура (Стрелки)</div>
            <div class="custom-select-option" data-value="swipe">Свайпы</div>
          </div>
        </div>
      </div>
      <div class="control-row">
        <label for="control-2">Игрок 3:</label>
        <div class="custom-select-container" id="control-2-container">
          <button class="custom-select-button" data-value="keyboard3">Клавиатура (ЗДЖЭ)</button>
          <div class="custom-select-options">
            <div class="custom-select-option" data-value="keyboard1">Клавиатура (ЦФЫВ)</div>
            <div class="custom-select-option" data-value="keyboard2">Клавиатура (НПРО)</div>
            <div class="custom-select-option" data-value="keyboard3">Клавиатура (ЗДЖЭ)</div>
            <div class="custom-select-option" data-value="keyboard4">Клавиатура (Стрелки)</div>
            <div class="custom-select-option" data-value="swipe">Свайпы</div>
          </div>
        </div>
      </div>
      <div class="control-row">
        <label for="control-3">Игрок 4:</label>
        <div class="custom-select-container" id="control-3-container">
          <button class="custom-select-button" data-value="keyboard4">Клавиатура (Стрелки)</button>
          <div class="custom-select-options">
            <div class="custom-select-option" data-value="keyboard1">Клавиатура (ЦФЫВ)</div>
            <div class="custom-select-option" data-value="keyboard2">Клавиатура (НПРО)</div>
            <div class="custom-select-option" data-value="keyboard3">Клавиатура (ЗДЖЭ)</div>
            <div class="custom-select-option" data-value="keyboard4">Клавиатура (Стрелки)</div>
            <div class="custom-select-option" data-value="swipe">Свайпы</div>
          </div>
        </div>
      </div>
    </div>
    <div class="control-preview">
      <div><kbd>Ц</kbd><kbd>Ф</kbd><kbd>Ы</kbd><kbd>В</kbd></div>
      <div><kbd>Н</kbd><kbd>П</kbd><kbd>Р</kbd><kbd>О</kbd></div>
      <div><kbd>З</kbd><kbd>Д</kbd><kbd>Ж</kbd><kbd>Э</kbd></div>
      <div><kbd>↑</kbd><kbd>←</kbd><kbd>↓</kbd><kbd>→</kbd></div>
    </div>
    <button id="start-btn"><span>Начать игру</span></button>
    <button id="back-btn" class="secondary"><span>Назад</span></button>
  </div>
  <div id="game-container">
    <canvas id="game-board"></canvas>
    <div id="game-over">
      <div class="game-over-content">
        <h2>Игра окончена!</h2>
        <p>Победитель: <span id="winner">Ничья</span></p>
        <div id="final-scores"></div>
        <button onclick="resetGame()"><span>Играть снова</span></button>
      </div>
    </div>
  </div>
  <div id="scores"></div>
  <div id="legend"></div>
  <script src="script.js"></script>
</body>
</html>
div>div>div>div>""